---
layout: post
title: TP3 Building web App using Angular
subtitle: Troisième TP
tags: [Web Avancé, Angular, Typescript, Node JS]
author: Mariem ZAOUALI
---

# TP 3 : Créer une application web à l'aide de l'Angular
À la fin de ce TP, vous serez capable de développer une application à l'aide du framework Angular. Vous allez manipuler la notion de composants en Angular. Vous sereiez apte à les créer et à les personnaliser. Vous manipulerez la syntaxe Template, la création et l'envoi des requêtes HTTP, le routage et la navigation et la création des formulaires.

Ce cours est inspriré du celui de Jim Cooper https://jcoop.io/author/jimcooperps/

## Préparer l'environnement
Nous utiliserons pour ce TP la version 16 de Angular. Pour ce faire, placez vous devant votre terminal et lancez la commande :
```cmd
npm install -g @angular/cli@16.0.0
```

Il se trouve parfois que la version de NodeJS n'est pas conforme à celle d'Angular. Pour régler ce problème, et d'ailleurs c'est le problème que nous faisons face pour ce TP, nous installon NVM (Node Version Manager) en suivant ces commandes et en les lançant dans le terminal de VS code.

```cmd
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.4/install.sh | bash
```
```cmd
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm
```

Pour bien vérifier que NVM a été bien installée, lancez la commande suivante:

```cmd
nvm --version
```
Il reste maintenant d'installer la bonne version de Node JS en tapant la commande suivante:

```cmd
nvm install 18
```
Puis: 

```cmd
nvm use 18
```

## Création du projet
Dans votre VS code, ouvrez le répertoire là où vous allez créer votre projet et lancez la commande suivante:
```cmd
ng new joes-robot-shop-enit
```
On vous demande quelques questions pour achever l'installation, vous allez répondre avec **No** quand on vous demande d'ajouter un Angular routing. Vous choisissez **CSS** pour le format de stylesheet.

Un fois créé et les dépendences installées, VS code va vous demander si vous voulez installer **Angular Language Service**. Acceptez sa proposition. Cette extension va vous aider en écrivant du code.

Ce qui a été généré à présent est une application complète. C'est une version bootstrap sur laquelle vous pourvez bâtir et personnaliser votre application. Testez cette application en tapant dans votre terminal du VS code tout en étant dans le répertoire de l'application ainsi créée:

```cmd
npm start
```

Regardez la structure générée. Vous avez rencontré dans le TP précédent le fichier `package.json`. En l'ouvrant, vous allez le reconnaître puisqu'il garde la même structure et rôle que le TP précédent. 

Vous avez également d'autres fichiers. Ouvrez le fichier `index.html`. Remarquez qu'il ne contient pas suffisamment de code qui lui permet d'afficher la page d'accueil que vous avez eu.
```html
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>JoesRobotShopEnit</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
</body>
</html>
```
Remarquez particulièrement le tag **app-root** qui n'est pas une balise HTML usuelle!
Ceci est un composant angular. Regardons particulièrement les fichiers qui commencent par le mot clé **app**. C'est le composant qui se chargent au sommet de tous les composants d'Angular. Remarquez que vous avez le même préfixe **app.component** mais des suffixes différents : **css**, **html**, **ts** et finalement **spec.ts**.
Ce sont les fichiers qui définissent le concept de composants en angular.

Examinez le code du fichier **app.component.ts**. Le tag rencontré dans le fichier HTML provient en fait du paramètre **selector** de ce fichier.
```ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  title = 'joes-robot-shop-enit';
}

```
 En examinant, le fichier `app.component.html`, vous allez trouver le HTML affiché dans votre page `index.html`. Maintenant remplacez son contenu par simplement:
```html
<h1>Hello World!</h1>
```
et dans le fichier  `app.component.ts`, supprimez la ligne du code :
```ts
 title = 'joes-robot-shop-enit';
```
Dans votre navigateur, vérifiez que vous avez bien la fameuse "Hello World!".

## Creating angular componenent
Nous allons commencer par la création de la page d'accueil. Nous créons pour ce faire le composant **home**.
```cmd
ng generate component home
```
Placez-vous au niveau du fichier `home.component.ts`. 
La première partie conceprne l'importation des modules nécessaires pour le fonctionnement du code
```ts
import { Component } from '@angular/core';
```
La deuxième partie est un **décorateur**. C'est un concept du Javascript utilisé pour ajouter des metadonnées sur les classes. Remarquez dans cette partie, que vous pouvez définir le **tag** à utiliser dans la partie HTML en le spécifiant devant le **selector**. Vous mentionnez aussi le fichier HTML template est `app.component.html`. Finalement, remarquez que devant **styleUrls**, nous pouvons mettre toute une liste de fichiers de styles. Dans notre cas ici, un seul a été mentionné pour définir le style à appliquer à notre composant.
```ts
@Component({
  selector: 'app-home',
  templateUrl: './home.component.html',
  styleUrls: ['./home.component.css']
})
```
La dernière partie concerne le code métier à développer pour lancer un traitement spécifique.
```ts
export class HomeComponent {

}

```
Faisons un petit test pour bien assimiler le concept. Allez au fichier `app.component.html` et ajoutez au-dessous de **Hello World!**, le tag app:
```html
<app-home></app-home>
```
Ajoutez un dans le fichier `home.component.html`le style suivant :
```html
<p class="red">home works</p>
```
Et finalement, ajoutez un dans le fichier `home.component.css` la règle suivante :
```css
.red{
  color: red;
}
```
Vérrifiez dans le fichier `app.module.ts`, l'existance de votre module **HomeComponent** qui a été ajouté automatiquement par Angular. Si vous avez ajouté un composant manuellement, n'oubliez pas de passer par ce fichier pour le déclarer!
```ts
import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';

import { AppComponent } from './app.component';
import { HomeComponent } from './home/home.component';

@NgModule({
  declarations: [
    AppComponent,
    HomeComponent
  ],
  imports: [
    BrowserModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }

```
Maintenant, nous allons ajouter du contenu à notre page home. Copiez ce code dans votre fichier `home.component.html`: 

```html
<div class="container">
    <div class="hero"></div>
  
    <div class="promoted">
      <img src="" alt="Friendly Robot Head" />
      <div class="promo-text">
        <div class="promo-main-text">DISPELL THE ROBOT APOCALYPSE MYTH</div>
        <div class="promo-sub-text cta">
          <div>SAVE 20% ON OUR FRIENDLIEST</div>
          <div>ROBOT HEADS</div>
        </div>
      </div>
      <img src="" alt="Big Eye Head" />
    </div>
  
    <ul class="robot-parts-cta">
      <li>
        <a class="part">
          <img src="" alt="Robot Heads" />
          <div>ROBOT HEADS</div>
        </a>
      </li>
      <li>
        <a class="part">
          <img src="" alt="Robot Arms" />
          <div>ROBOT ARMS</div>
        </a>
      </li>
      <li>
        <a class="part">
          <img src="" alt="Robot Torsos" />
          <div>ROBOT TORSOS</div>
        </a>
      </li>
      <li>
        <a class="part">
          <img src="" alt="Robot Bases" />
          <div>ROBOT BASES</div>
        </a>
      </li>
    </ul>
  
    <div class="white-paper">
      <img src="" alt="Robot Apocalyse" />
      <div class="text">
        <div>
          <div class="header-text cta">Will they kill us all?</div>
          <div class="sub-text">
            <p>10 Myths About the</p>
            <p>Robot Apocalyse</p>
          </div>
        </div>
        <div class="large-text">WHITE PAPER</div>
        <a href="" class="learn-more">Learn More</a>
      </div>
    </div>
  </div>
```
et dans le fichier `home.component.css`:
```css
.container {
    display: flex;
    flex-direction: column;
  }
  
  .hero {
    background-repeat: no-repeat;
    height: 300px;
    background-size: cover;
    background-position: center center;
    text-align: center;
    margin-left: -8px;
    margin-right: -8px;
  }
  
  .promoted {
    display: flex;
    justify-content: space-between;
    margin: 25px;
    border-top: 2px solid #888;
    border-bottom: 2px solid #888;
    padding: 10px 150px 10px 150px;
  }
  
  .promoted img {
    width: 150px;
    height: 150px;
  }
  
  .promo-text {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    margin: 40px 0 40px 0;
  }
  
  .promo-main-text {
    font-size: 24px;
    text-align: center;
  }
  
  .promo-sub-text {
    font-size: 20px;
    text-align: center;
  }
  
  .robot-parts-cta {
    display: flex;
    justify-content: space-between;
    margin: 0px 100px 25px 100px;
    padding: 10px 0;
  }
  
  .part {
    display: flex;
    flex-direction: column;
    font-size: 18px;
    text-align: center;
    cursor: pointer;
  }
  
  .part img {
    width: 180px;
    margin-bottom: 10px;
    padding: 10px;
    background-color: #888;
  }
  
  .white-paper {
    display: flex;
    height: 100%;
    margin: 0 25px;
  }
  
  .white-paper img {
    width: 75%;
  }
  
  .white-paper .text {
    display: flex;
    width: 25%;
    flex-direction: column;
    background-color: #333;
    text-align: center;
    justify-content: space-between;
  }
  
  .white-paper .header-text {
    margin-top: 50px;
    font-size: 30px;
  }
  
  .white-paper .sub-text {
    font-size: 20px;
    color: #5cadd2;
    margin-top: 10px;
    padding: 0 15%;
  }
  
  .white-paper .sub-text p {
    margin: 0;
  }
  
  .white-paper .large-text {
    border-top: 2px solid #666;
    border-bottom: 2px solid #666;
    margin-top: -50px;
    padding: 20px 0;
    font-size: 35px;
    color: #fff;
  }
  
  .white-paper .learn-more {
    background-color: #d25ca1;
    color: white;
    padding: 15px 25px;
    text-decoration: none;
  }
```
Nous définissons aussi le style gloabal de l'application en ajoutant ce contenu au fichier qui s'appelle `style.css` dans la racine principale de votre projet:

```css
body {
    background-color: #fff;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    color: #444;
  }
  
  a {
    color: #444;
    text-decoration: none;
  }
  
  a.active {
    padding-bottom: 5px;
    border-bottom: 2px solid #d25ca1;
  }
  
  a.button.active {
    padding-bottom: 5px;
    border-bottom: 2px solid #d25ca1;
  }
  
  a:visited {
    color: #444;
  }
  
  a:hover {
    color: #5cadd2;
  }
  
  a.cta {
    color: #d25ca1;
  }
  
  a.cta:visited {
    color: #d25ca1;
  }
  
  a.cta:hover {
    color: #f27cb1;
  }
  
  .cta {
    color: #d25ca1;
  }
  
  a.cta {
    color: #d25ca1;
  }
  
  a.cta:visited {
    color: #d25ca1;
  }
  
  a.cta:hover {
    color: #f27cb1;
  }
  
  .cta {
    color: #d25ca1;
  }
  
  ul {
    list-style-type: none;
    padding: 0;
  }
  
  button {
    font-size: 15px;
    padding: 15px 25px;
    background-color: #5cadd2;
    color: #fff;
    border: 0;
    box-shadow: none;
    border-radius: 5px;
    cursor: pointer;
  }
  
  a.button {
    font-size: 15px;
    padding: 15px 25px;
    background-color: #5cadd2;
    color: #fff;
    border: 0;
    box-shadow: none;
    border-radius: 5px;
    cursor: pointer;
  }
  
  a.button:hover {
    color: #1c6d92;
  }
  
  button:disabled {
    background-color: #777;
  }
  
  button:hover {
    color: #1c6d92;
  }
  
  button.cta {
    font-family: Arial, Helvetica, sans-serif;
    background-color: #d25ca1;
    color: #ddd;
  }
  
  button.cta:hover {
    color: #fff;
  }
  
  input {
    padding: 15px;
    font-size: 20px;
  }
  
  .button.cta:disabled {
    background-color: #f590c4;
    color: #aaa;
  }

```

## Lifecycle component hook

## Création de la page du catalogue des robots 

