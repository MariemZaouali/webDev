---
layout: post
title: TP3 Building web App using Angular
subtitle: Troisième TP
tags: [Web Avancé, Angular, Typescript, Node JS]
author: Mariem ZAOUALI
---

# TP 3 : Créer une application web à l'aide de l'Angular
À la fin de ce TP, vous serez capable de développer une application à l'aide du framework Angular. Vous allez manipuler la notion de composants en Angular. Vous sereiez apte à les créer et à les personnaliser. Vous manipulerez la syntaxe Template, la création et l'envoi des requêtes HTTP, le routage et la navigation et la création des formulaires.

Ce cours est inspriré du celui de Jim Cooper https://jcoop.io/author/jimcooperps/

## Préparer l'environnement
Nous utiliserons pour ce TP la version 16 de Angular. Pour ce faire, placez vous devant votre terminal et lancez la commande :
```cmd
npm install -g @angular/cli@16.0.0
```

Il se trouve parfois que la version de NodeJS n'est pas conforme à celle d'Angular. Pour régler ce problème, et d'ailleurs c'est le problème que nous faisons face pour ce TP, nous installon NVM (Node Version Manager) en suivant ces commandes et en les lançant dans le terminal de VS code.

```cmd
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.4/install.sh | bash
```
```cmd
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm
```

Pour bien vérifier que NVM a été bien installée, lancez la commande suivante:

```cmd
nvm --version
```
Il reste maintenant d'installer la bonne version de Node JS en tapant la commande suivante:

```cmd
nvm install 18
```
Puis: 

```cmd
nvm use 18
```

## Création du projet
Dans votre VS code, ouvrez le répertoire là où vous allez créer votre projet et lancez la commande suivante:
```cmd
ng new joes-robot-shop-enit
```
On vous demande quelques questions pour achever l'installation, vous allez répondre avec **No** quand on vous demande d'ajouter un Angular routing. Vous choisissez **CSS** pour le format de stylesheet.

Un fois créé et les dépendences installées, VS code va vous demander si vous voulez installer **Angular Language Service**. Acceptez sa proposition. Cette extension va vous aider en écrivant du code.

Ce qui a été généré à présent est une application complète. C'est une version bootstrap sur laquelle vous pourvez bâtir et personnaliser votre application. Testez cette application en tapant dans votre terminal du VS code tout en étant dans le répertoire de l'application ainsi créée:

```cmd
npm start
```

Regardez la structure générée. Vous avez rencontré dans le TP précédent le fichier `package.json`. En l'ouvrant, vous allez le reconnaître puisqu'il garde la même structure et rôle que le TP précédent. 

Vous avez également d'autres fichiers. Ouvrez le fichier `index.html`. Remarquez qu'il ne contient pas suffisamment de code qui lui permet d'afficher la page d'accueil que vous avez eu.
```html
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>JoesRobotShopEnit</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
</body>
</html>
```
Remarquez particulièrement le tag **app-root** qui n'est pas une balise HTML usuelle!
Ceci est un composant angular. Regardons particulièrement les fichiers qui commencent par le mot clé **app**. C'est le composant qui se chargent au sommet de tous les composants d'Angular. Remarquez que vous avez le même préfixe **app.component** mais des suffixes différents : **css**, **html**, **ts** et finalement **spec.ts**.
Ce sont les fichiers qui définissent le concept de composants en angular.

Examinez le code du fichier **app.component.ts**. Le tag rencontré dans le fichier HTML provient en fait du paramètre **selector** de ce fichier.
```ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  title = 'joes-robot-shop-enit';
}

```
 En examinant, le fichier `app.component.html`, vous allez trouver le HTML affiché dans votre page `index.html`. Maintenant remplacez son contenu par simplement:
```html
<h1>Hello World!</h1>
```
et dans le fichier  `app.component.ts`, supprimez la ligne du code :
```ts
 title = 'joes-robot-shop-enit';
```
Dans votre navigateur, vérifiez que vous avez bien la fameuse "Hello World!".

## Creating angular componenent
Nous allons commencer par la création de la page d'accueil. Nous créons pour ce faire le composant **home**.
```cmd
ng generate component home
```
Placez-vous au niveau du fichier `home.component.ts`. 
La première partie conceprne l'importation des modules nécessaires pour le fonctionnement du code
```ts
import { Component } from '@angular/core';
```
La deuxième partie est un **décorateur**. C'est un concept du Javascript utilisé pour ajouter des metadonnées sur les classes.
```ts
@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
```
La dernière partie concerne le code métier à développer pour lancer un traitement spécifique.
```ts
export class AppComponent {

}
```

probablement une erreur de tslib et autres. Il faut installer les dépendences dans le fichier package.json.
npm install

```ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-home',
  templateUrl: './home.component.html',
  styleUrls: ['./home.component.css']
})
export class HomeComponent {

}
```
Manipulation entre home.component.html et app.component.css pour ajouter du texte coloré en rouge. Ce texte sera ajouté à la page
app.component.html en ajoutant la balise <app-home> seulement. Il faut montrer que le app.module.ts ajoute automatiquement les composants
nouvellement ajoutés. S'ils ne sont pas présents dans ce fichier, une erreur sera affichée.

Il est important de voir que lorsqu'on passe par la création du projet à l'aide de "angular cli", nous sommes entrain de respecter les bonnes pratiques de Angular.


On peut modifier les préfixes de notre application pour éviter une confusion avec des composants venant de votre organisation ou téléchargés. Ceci peut être fait au niveau du fichier angular.json et quand vous lancez ng generate component home, vous voyez que votre selector a été modifié suivant le préfixe dans le fichier angular.json.

## Lifecycle component hook

## Création de la page du catalogue des robots 

